{extend name="public/base" /}

{block name="content"}
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row" style="margin-bottom: 10px;">
        <div class="col-sm-12 text-right">
            <a href="/admin/art/create" class="btn btn-primary">添加文章</a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-content">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>栏目</th>
                            <th>标题</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody>
                        {foreach $data as $item}
                        <tr>
                            <td>{$item.id}</td>
                            <td>{$item->cate['cate_name']}</td>
                            <td>{$item.title}</td>
                            <td>
                                <a href="/admin/art/{$item.id}/edit">修改</a> |
                                <a class="delart" href="/admin/art/{$item.id}">删除</a>
                            </td>
                        </tr>
                        {/foreach}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-sm-12">
                <div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate">
                    {$data|raw}
                </div>
            </div>
        </div>
    </div>


</div>
{/block}

{block name="js"}
<script src="/static/vue.js"></script>
<script>
    // console.log("{$data}");
    $('.delart').click(function () {
        // 请求地址
        var url = $(this).attr('href');

        // 发送ajax
        $.ajax({
            url: url,
            type: 'DELETE',
            success: function (ret) {
                alert(ret);
            }
        })

        // 取消a标签默认行为
        return false;
    });
</script>

{/block}
